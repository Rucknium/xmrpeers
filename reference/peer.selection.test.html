<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Test of whether peer selection deduplicates subnets — peer.selection.test • xmrpeers</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Test of whether peer selection deduplicates subnets — peer.selection.test"><meta name="description" content="TODO"><meta property="og:description" content="TODO"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">xmrpeers</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Test of whether peer selection deduplicates subnets</h1>

      <div class="d-none name"><code>peer.selection.test.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>TODO</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">peer.selection.test</span><span class="op">(</span></span>
<span>  deduplicated.subnet.level <span class="op">=</span> <span class="fl">24</span>,</span>
<span>  do.list <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"white_list"</span>, <span class="st">"gray_list"</span><span class="op">)</span>,</span>
<span>  csv.file.suffix <span class="op">=</span> <span class="st">"peer-selection.csv"</span>,</span>
<span>  stat.tests <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>rms_gof <span class="op">=</span> <span class="va">rms_gof</span><span class="op">)</span>,</span>
<span>  already.connected.exclusion.subnet.level <span class="op">=</span> <span class="fl">24</span>,</span>
<span>  only.first.draw.in.batch <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  white_list.monte.carlo.iters <span class="op">=</span> <span class="fl">10000</span>,</span>
<span>  white_list.max.size <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  gray_list.max.size <span class="op">=</span> <span class="fl">5000</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-deduplicated-subnet-level">deduplicated.subnet.level<a class="anchor" aria-label="anchor" href="#arg-deduplicated-subnet-level"></a></dt>
<dd><p>The subnet level at which <code>monerod</code> is
performing the deduplication.</p></dd>


<dt id="arg-do-list">do.list<a class="anchor" aria-label="anchor" href="#arg-do-list"></a></dt>
<dd><p>Which peer lists to analyze? By default, will do both
white_list and gray_list.</p></dd>


<dt id="arg-csv-file-suffix">csv.file.suffix<a class="anchor" aria-label="anchor" href="#arg-csv-file-suffix"></a></dt>
<dd><p>Suffix for csv files of input data. It should
be the same as used in the <code><a href="peer.selection.collect.html">peer.selection.collect()</a></code> function that
collected the data. The suffix is applied to <code>white_list-</code>, <code>gray_list-</code>,
and <code>connections-</code>.</p></dd>


<dt id="arg-stat-tests">stat.tests<a class="anchor" aria-label="anchor" href="#arg-stat-tests"></a></dt>
<dd><p>A named list of one or more functions that performs
a goodness-of-fit test for discrete distributions. The list elements must
be named. Each function should take as its first argument the observed
counts for each category and its second argument should be a vector of
probabilities of the reference distribution. The default, <code>rms_gof()</code>,
is the root-mean-square goodness-of-fit test in the <code>discretefit</code>
package. The <code>rms_gof()</code> test appears to have size closer to the correct
size, compared to other tests,  when there are many zeros in observed counts
and the reference distribution is non-uniform.</p></dd>


<dt id="arg-already-connected-exclusion-subnet-level">already.connected.exclusion.subnet.level<a class="anchor" aria-label="anchor" href="#arg-already-connected-exclusion-subnet-level"></a></dt>
<dd><p>The subnet level that is
used to exclude subnets that the node is already connected to. Set to
24 by default.</p></dd>


<dt id="arg-only-first-draw-in-batch">only.first.draw.in.batch<a class="anchor" aria-label="anchor" href="#arg-only-first-draw-in-batch"></a></dt>
<dd><p>The Monero node will often make
multiple draws of candidate connections in a short period because the
first draw(s) fail to connect. The draws in these "batches" are done
without replacement, but the statistical test assumes that draws are done
with replacement. This argument is TRUE by default.</p></dd>


<dt id="arg-white-list-monte-carlo-iters">white_list.monte.carlo.iters<a class="anchor" aria-label="anchor" href="#arg-white-list-monte-carlo-iters"></a></dt>
<dd><p>Number of iterations for simulating
the reference probability distribution that draws from the <code>white_list</code>
should have. If the process is unacceptably slow, this number can be
reduced to 1000 at the cost of a less accurate test.</p></dd>


<dt id="arg-white-list-max-size">white_list.max.size<a class="anchor" aria-label="anchor" href="#arg-white-list-max-size"></a></dt>
<dd><p>Maximum size of the node's peer <code>white_list</code>.
This should not be changed under normal circumstances because it is
set in the <code>monerod</code> code.</p></dd>


<dt id="arg-gray-list-max-size">gray_list.max.size<a class="anchor" aria-label="anchor" href="#arg-gray-list-max-size"></a></dt>
<dd><p>Maximum size of the node's peer <code>gray_list</code>.
This should not be changed under normal circumstances because it is
set in the <code>monerod</code> code.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list. One element for each of the <code>do.list</code> specified. Each of the
elements is a list with a <code>tests</code> component that contains the results of
the statistical tests specified in <code>stat.tests</code>. The second element of
the list is a <code>data.frame</code>/<code>data.table</code> that contains the observed counts
of new connection IP addresses drawn by <code>monerod</code> and the expected
reference probabilities.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu">future</span><span class="fu">::</span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="fu">future</span><span class="fu">::</span><span class="va"><a href="https://future.futureverse.org/reference/multisession.html" class="external-link">multisession</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Multi-threaded is recommended</span></span></span>
<span class="r-in"><span><span class="va">peer.selection.results</span> <span class="op">&lt;-</span> <span class="fu">peer.selection.test</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rucknium.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

