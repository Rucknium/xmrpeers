<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Generate a simulated Monero network — gen.network • xmrpeers</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Generate a simulated Monero network — gen.network"><meta name="description" content="Generates a simulated Monero network based on user-provided
IP addresses of reachable nodes. The assumed number of unreachable nodes
can be provided. A list of malicious node IP addresses can specify nodes
that do not establish outbound connections. The user can specify whether
the peer selection algorithm should perform subnet deduplication, and
at what subnet mask level. Network summary statistics are optionally
computed."><meta property="og:description" content="Generates a simulated Monero network based on user-provided
IP addresses of reachable nodes. The assumed number of unreachable nodes
can be provided. A list of malicious node IP addresses can specify nodes
that do not establish outbound connections. The user can specify whether
the peer selection algorithm should perform subnet deduplication, and
at what subnet mask level. Network summary statistics are optionally
computed."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">xmrpeers</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Generate a simulated Monero network</h1>

      <div class="d-none name"><code>gen.network.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generates a simulated Monero network based on user-provided
IP addresses of reachable nodes. The assumed number of unreachable nodes
can be provided. A list of malicious node IP addresses can specify nodes
that do not establish outbound connections. The user can specify whether
the peer selection algorithm should perform subnet deduplication, and
at what subnet mask level. Network summary statistics are optionally
computed.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">gen.network</span><span class="op">(</span></span>
<span>  <span class="va">outbound.ips</span>,</span>
<span>  malicious.ips <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  n.unreachable <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  already.connected.subnet.level <span class="op">=</span> <span class="fl">16</span>,</span>
<span>  deduplication.subnet.level <span class="op">=</span> <span class="fl">24</span>,</span>
<span>  do.deduplication <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  default.outbound.connections <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  dropped.connection.churns <span class="op">=</span> <span class="fl">12</span>,</span>
<span>  compute.network.stats <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-outbound-ips">outbound.ips<a class="anchor" aria-label="anchor" href="#arg-outbound-ips"></a></dt>
<dd><p>A character vector of IP addresses that host reachable
Monero nodes. Required.</p></dd>


<dt id="arg-malicious-ips">malicious.ips<a class="anchor" aria-label="anchor" href="#arg-malicious-ips"></a></dt>
<dd><p>Optional character vector of IP addresses that are suspected
to be malicious. Can contain IP address ranges with subnet notation.</p></dd>


<dt id="arg-n-unreachable">n.unreachable<a class="anchor" aria-label="anchor" href="#arg-n-unreachable"></a></dt>
<dd><p>Number of unreachable nodes assumed to be in the
network.</p></dd>


<dt id="arg-already-connected-subnet-level">already.connected.subnet.level<a class="anchor" aria-label="anchor" href="#arg-already-connected-subnet-level"></a></dt>
<dd><p>The subnet mask level of the
"already-connected-subnet" disqualifying condition. Set to 32 to disable
this disqualifying condition.</p></dd>


<dt id="arg-deduplication-subnet-level">deduplication.subnet.level<a class="anchor" aria-label="anchor" href="#arg-deduplication-subnet-level"></a></dt>
<dd><p>The subnet mask level at which to perform
subnet deduplication.</p></dd>


<dt id="arg-do-deduplication">do.deduplication<a class="anchor" aria-label="anchor" href="#arg-do-deduplication"></a></dt>
<dd><p>If TRUE, perform subnet deduplication. If FALSE,
do not.</p></dd>


<dt id="arg-default-outbound-connections">default.outbound.connections<a class="anchor" aria-label="anchor" href="#arg-default-outbound-connections"></a></dt>
<dd><p>The number of outbound connections
of each node.</p></dd>


<dt id="arg-dropped-connection-churns">dropped.connection.churns<a class="anchor" aria-label="anchor" href="#arg-dropped-connection-churns"></a></dt>
<dd><p>After <code>default.outbound.connections</code>
has been reached, the number of times to drop one connection and add
another one. The "already-connected-subnet" behavior makes some peer
churning necessary to get the correct probability distribution.</p></dd>


<dt id="arg-compute-network-stats">compute.network.stats<a class="anchor" aria-label="anchor" href="#arg-compute-network-stats"></a></dt>
<dd><p>If TRUE, compute network summary statistics
of the simulated network.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A list with three elements:</p><dl><dt>nodes</dt>
<dd><p>A <code>data.table</code> with seven columns: <code>index</code>, an index of the
node. <code>ip</code>, the IP address of the node, if it is reachable (NA if it
is not). <code>already.connected.subnet</code>, the subnet that the node belongs to,
based on the <code>already.connected.subnet.level</code> argument specified by the
user. <code>deduplication.subnet</code>, the subnet that the node belongs to,
based on the <code>deduplication.subnet.level</code> argument specified by the user.
<code>reachable</code>, TRUE if reachable and FALSE if not. <code>malicious</code>, TRUE if
node is on the <code>malicious.ips</code> list supplied by the user. <code>n.inbound</code>,
number of inbound connections of the node in the simulated network.</p></dd>

<dt>edgelist</dt>
<dd><p>A <code>data.table</code>. The network edge list of the directed
graph. The <code>origin</code> column is the node establishing the connection.
The <code>destination</code> column is the node accepting the connection. The
<code>index</code> column of the <code>nodes</code> <code>data.table</code> is used as the identifier.</p></dd>

<dt>network.stats</dt>
<dd><p>A list of four network summary statistics, computed
by the <code>igraph</code> package: <code>centr_betw</code>, <code>centr_clo</code>, <code>centr_degree</code>,
and <code>centr_eigen</code>. See their documentation in the <code>igraph</code> package
for interpretation.</p></dd>


</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">good_peers</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">good_peers</span> <span class="op">&lt;-</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_extract.html" class="external-link">str_extract</a></span><span class="op">(</span><span class="va">good_peers</span>,</span></span>
<span class="r-in"><span>  <span class="st">"[0-9]{1,3}[.][0-9]{1,3}[.][0-9]{1,3}[.][0-9]{1,3}"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">good_peers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">good_peers</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">good_peers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="va">good_peers</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Clean IP addresses</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">suspected.malicious.ips</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"https://raw.githubusercontent.com/Boog900/monero-ban-list/refs/heads/main/ban_list.txt"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">future</span><span class="fu">::</span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="fu">future</span><span class="fu">::</span><span class="va"><a href="https://future.futureverse.org/reference/multisession.html" class="external-link">multisession</a></span>,</span></span>
<span class="r-in"><span>  workers <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">floor</a></span><span class="op">(</span><span class="fu">parallelly</span><span class="fu">::</span><span class="fu"><a href="https://parallelly.futureverse.org/reference/availableCores.html" class="external-link">availableCores</a></span><span class="op">(</span><span class="op">)</span><span class="op">/</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Multi-threaded is recommended</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">share.reachable</span> <span class="op">&lt;-</span> <span class="fl">0.2</span></span></span>
<span class="r-in"><span><span class="co"># Set share of nodes that are reachable to 20 percent</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">n.assumed.unreachable</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">floor</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">good_peers</span><span class="op">)</span> <span class="op">*</span></span></span>
<span class="r-in"><span>    <span class="op">(</span><span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">share.reachable</span><span class="op">)</span> <span class="op">/</span> <span class="va">share.reachable</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">314</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># This is a random simulation</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">generated.network</span> <span class="op">&lt;-</span> <span class="fu">gen.network</span><span class="op">(</span>outbound.ips <span class="op">=</span> <span class="va">good_peers</span>,</span></span>
<span class="r-in"><span>  malicious.ips <span class="op">=</span> <span class="va">suspected.malicious.ips</span>,</span></span>
<span class="r-in"><span>  n.unreachable <span class="op">=</span> <span class="va">n.assumed.unreachable</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">generated.network</span><span class="op">$</span><span class="va">nodes</span><span class="op">[</span></span></span>
<span class="r-in"><span>  <span class="va">reachable</span> <span class="op">==</span> <span class="cn">TRUE</span> <span class="op">&amp;</span> <span class="va">malicious</span> <span class="op">==</span> <span class="cn">FALSE</span>, <span class="va">n.inbound</span><span class="op">]</span>, breaks <span class="op">=</span> <span class="fl">50</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Network stats</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">generated.network</span><span class="op">$</span><span class="va">network.stats</span><span class="op">)</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">generated.network</span><span class="op">$</span><span class="va">network.stats</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">centralization</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rucknium.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

